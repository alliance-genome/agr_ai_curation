# MGI (Mouse Genome Informatics) Supervisor Rules
# Model organism: Mus musculus (mouse)
#
# These rules guide the supervisor when coordinating allele lookups for mouse data.
# Key focus: Passing author/lab attribution info to the allele specialist for disambiguation.

mod_id: MGI
species: Mus musculus
data_provider: MGI
taxon: NCBITaxon:10090

# Allele dispatch strategy - how to route allele queries with attribution context
allele_dispatch_strategy:
  description: |
    When dispatching allele queries to the Allele Specialist, include any
    author/laboratory attribution information found in the source document.
    This helps disambiguate between multiple similar alleles.

  triggers:
    - "gifted from"
    - "obtained from"
    - "provided by"
    - "kindly provided"
    - "generous gift"
    - "purchased from"
    - "from the lab of"
    - "from Dr."
    - "laboratory of"

  when_to_include_attribution: |
    Include author/lab info when the PDF specialist reports allele mentions with:
    - Specific author names (e.g., "from Dr. Joshua Scallan")
    - Laboratory names (e.g., "from the Bhola lab")
    - Institution names (e.g., "from Jackson Laboratory")

  how_to_dispatch: |
    Instead of: "Look up Cdh5 allele"
    Use: "Look up Cdh5 allele (source: Dr. Joshua Scallan)" or
         "Look up Cdh5 allele from Dr. Joshua Scallan's lab"

# Main search strategy injected into supervisor prompt
search_strategy: |
  <mgi_search_rules>
  ## MGI-SPECIFIC ALLELE DISPATCH GUIDELINES (Mus musculus)

  <instructions>
  When the PDF Specialist reports mouse allele information that includes source attribution
  (author name, laboratory, or institution), you MUST include this context in your query
  to the Allele Specialist.

  ### Why Attribution Matters

  MGI contains multiple alleles for the same gene (e.g., 20+ different Cdh5 knockouts).
  The Allele Specialist can use the `fullname_attribution` field to disambiguate and select
  the correct allele when you provide source context.

  ### When to Include Attribution

  Include attribution context when the PDF Specialist reports any of these trigger phrases:
  - "gifted from", "obtained from", "provided by", "kindly provided"
  - "generous gift from", "gift of"
  - "from the lab of", "from Dr.", "from Professor"
  - "purchased from [institution]"
  - "generated by", "created by"

  ### How to Format Your Query

  Use this format when attribution is available:
  - Pattern: "Look up [gene/allele] from [source]"
  - Alternative: "Look up [gene/allele] (source: [name/institution])"

  Keep attribution concise - extract just the key identifier (last name, institution, or lab name).
  </instructions>

  <examples>
  | PDF Specialist Reports | Your Query to Allele Specialist |
  |------------------------|--------------------------------|
  | "Cdh5 fl/fl mice gifted from Dr. Joshua Scallan" | "Look up Cdh5 allele from Dr. Scallan" |
  | "BMAL1 knockout obtained from the Bhola laboratory" | "Look up BMAL1 allele from Bhola lab" |
  | "Mice purchased from Jackson Laboratory (JAX)" | "Look up [allele] from Jackson Laboratory" |
  | "Foxp3-EGFP reporter generated by Dr. Smith's group" | "Look up Foxp3 allele from Dr. Smith" |
  </examples>

  <workflow_example>
  **Step-by-step example:**

  1. **PDF Specialist reports:** "Paper mentions Cdh5 fl/fl mice gifted from Dr. Joshua Scallan"
  2. **You extract attribution:** "Dr. Joshua Scallan" â†’ "Dr. Scallan" (simplified)
  3. **You dispatch query:** "Look up Cdh5 allele from Dr. Scallan"
  4. **Allele Specialist:** Searches MGI with attribution context, uses `fullname_attribution`
     field to find allele created by Joshua Scallan
  5. **Result:** Returns MGI:3835835 (correct Cdh5 floxed allele by Scallan)
  </workflow_example>

  <constraints>
  ### When NOT to Include Attribution

  - Do NOT include attribution if the PDF Specialist doesn't report a source
  - Do NOT fabricate or infer attribution from other context
  - Do NOT include vague attributions like "from a colleague" or "from previous work"
  - If multiple sources are mentioned, include only the direct source of the specific allele

  ### What NOT to Send

  - Do NOT send full sentences: "The paper says the mice were from Dr. X"
  - Do NOT include zygosity notation in the query (fl/fl, +/-, etc.) - just the gene/allele name
  - Do NOT include unnecessary details like institutions' full addresses
  </constraints>
  </mgi_search_rules>

# Result synthesis - how to present results to user
result_synthesis: |
  <output_instructions>
  When presenting allele lookup results to the user, include attribution context using this structure:

  ### Required Elements

  1. **Allele identification** - MGI ID, gene symbol, allele name
  2. **Attribution status** (choose one based on match quality):
     - **High confidence:** "This allele was created by [creator name]" (exact match)
     - **Medium confidence:** "Likely match - allele attributed to [creator name]" (partial match)
     - **Low confidence:** "Allele found, but source attribution could not be verified"
     - **No attribution:** Skip attribution mention entirely (if paper didn't report source)

  ### Confidence Criteria

  - **High:** Creator name in paper exactly matches `fullname_attribution` in MGI
  - **Medium:** Last name matches, or institution matches
  - **Low:** Allele found via other means, attribution doesn't match

  ### Output Format Template

  ```
  Found: [Allele name] (MGI:[ID])
  [Attribution statement based on confidence level]
  [Optional: Any additional disambiguating details]
  ```

  ### Example Outputs

  **High confidence:**
  > Found: Cdh5<tm1.1(KOMP)Vlcg> (MGI:3835835)
  > This allele was created by Joshua Scallan.

  **Medium confidence:**
  > Found: Bmal1<tm1.1Bra> (MGI:3512444)
  > Likely match - allele attributed to Bradfield laboratory.

  **Low confidence:**
  > Found: Foxp3<tm1Flv> (MGI:3052296)
  > Allele found, but source attribution could not be verified.

  **No attribution in paper:**
  > Found: Clock<tm1Jt> (MGI:1861941)
  > (No attribution statement - paper didn't report source)
  </output_instructions>

  <constraints>
  - Do NOT mention attribution if the original paper query had no attribution context
  - Do NOT overstate confidence - if uncertain, use "likely match" or "could not be verified"
  - Do NOT include attribution details if the Allele Specialist returned no attribution data
  - Keep output concise (3-4 sentences maximum)
  </constraints>
